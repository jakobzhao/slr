
<!DOCTYPE html>
<html lang='en'>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <title>Sea Level Rise and Migration</title>
    <!--http://localhost:63342/slr/index3.html?_ijt=88d2vjm5phcul75jff8688e48m-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />

    <link rel="icon" href="img/SLR-icon-grey.ico" width="16" height="16" type="image/x-icon"/>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- Map Stylesheets -->
    <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.35.1/mapbox-gl.css" rel='stylesheet' />

    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="css/main.css" />
    <!-- Javascript Libraries -->
    <script src="http://cdn.leafletjs.com/leaflet/v1.0.3/leaflet.js"></script>
     <!--mapbox gl js -->
    <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.35.1/mapbox-gl.js"></script>
     <!--leaflet mapbox js -->
    <script src="http://rawgit.com/mapbox/mapbox-gl-leaflet/master/leaflet-mapbox-gl.js"></script>

    <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
    <script src="https://ivansanchez.gitlab.io/Leaflet.TileLayer.GL/src/Leaflet.TileLayer.GL.js"></script>

</head>
<body>

<div>
    <nav id="mainNav" class="navbar navbar-default navbar-fixed-top navbar-custom">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand logo"  href="index.html"> <img alt="Home Page" width="22%" src="img/SLR-icon-words-trans.png"></a>
            </div>


            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="index.html"></a>
                    </li>
                    <!--Choose a state!-->
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Zoom to State... <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <!--use font awesome icons-->
                            <li><a href="#"> <i class="fa fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
                            <li><a href="#"> <i class="fa fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
                            <li><a href="https://tinyurl.com/kcgu2b4"> <i class="fa fa-link" aria-hidden="true"></i>Github</a></li>
                        </ul>
                    </li>
                    <li class="dropdown-toggle">
                        <a href="index.html">SLR Geovizualization</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Share<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <!--use font awesome icons-->
                            <li><a href="#"> <i class="fa fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
                            <li><a href="#"> <i class="fa fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
                            <li><a href="https://tinyurl.com/kcgu2b4"> <i class="fa fa-link" aria-hidden="true"></i>Github</a></li>
                        </ul>
                    </li>
                    <li class="dropdown-toggle">
                        <a href="javascript:map.setView([40, -120.5795], 5);">About</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
</div>
<!--poop-->
<!--info panel-->
<div class="info-panel">
    <h4> Sea Level Rise Migration Map </h4><hr>
    <p><b> Meters below sea level in 2100: </b></p><br>
    <i style="background: #f5f5f3"></i> <p> Above sea level </p>
    <i style="background: #ffeda0"></i> <p> 0.0 - 0.6 meters </p>
    <i style="background: #feb24c"></i> <p> 0.6 - 1.2 meters </p>
    <i style="background: #f03b20"></i> <p> 1.2 - 1.8 meters </p>
    <br>

    <!--place holder-->
    <p>Hover mouse over hexagon to see migration from the inundated region. Magnitude of migration groups are represented by arc thickness (???).</p><br/>
    <p>Migration data based on estimates for 1.8m of sea level rise, and for estimated U.S. population in 2100. See <a href="about.html">"Team and Project Information" for more details.</a></p><br>
    <p> Web Map Lib: Leaflet | BaseMap: CartoDB |</p><br>
    <p> Created By: <a href="about.html/#team"> Students and faculty at Oregon State University </a></p><br>
    <p> A Project supported by <a href="http://geoviz.ceoas.oregonstate.edu" target="_blank"> <img src="img/cart-logo.png" style="height:16px;margin-top:-4px"> The Cartography and Geovisualization Group</a> at Oregon State University</p>

</div>


<div id="map"></div>

<script>



    var fragmentShader = `
        void main(void) {
            highp vec4 texelColour = texture2D(uTexture0, vec2(vTextureCoords.s, vTextureCoords.t));

            // Height is represented in TENTHS of a meter
            highp float height = (
                texelColour.r * 255.0 * 256.0 * 256.0 +
                texelColour.g * 255.0 * 256.0 +
                texelColour.b * 255.0 )
            -100000.0;
            if (height > 18.0) {
                // ABOVE 1.8m, SAFE...
                gl_FragColor = vec4(0.5, 0.5, 0.5, 0.0);
            } else if (height > 12.0) {
            // ABOVE 1.2m...
                gl_FragColor = vec4(255.0/255.0, 237.0/255.0, 160.0/255.0, 0.5);
            } else if (height > 6.0) {
                // ABOVE 0.6m...
                gl_FragColor = vec4(254.0/255.0, 178.0/255.0, 76.0/255.0, .5);
                            } else if (height > 0.0) {
                // JUST ABOVE SEA LEVEL (>0m)...
                gl_FragColor = vec4(240.0/255.0, 59.0/255.0, 32.0/255.0, .5);
            } else {
                // THE OCEAN
                gl_FragColor = vec4(0.80, 0.92, 1.0, 0.4);
            }
        }
`

//    var map = L.map('map').setView([38.432452, -104.000728], 5);
//
//    var mapboxAccessToken = 'pk.eyJ1IjoibWF0aGV3c24iLCJhIjoiY2oyNWp3NjhwMDA1bDJ3c2NzaGdlOXkxaiJ9.FmtJ5Lf8FFUNAjlgLPNAOA';
//
//    // construct the base map.
//    L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png').addTo(map);
//
//    var antitoner = L.tileLayer.gl({
//        fragmentShader: fragmentShader,
//        tileUrls: ['https://{s}.tiles.mapbox.com/v4/mapbox.terrain-rgb/{z}/{x}/{y}.pngraw?access_token=' + mapboxAccessToken]
//    }).addTo(map);

    // Set leaflet map
    var map = L.map("map",{zoomControl: false}).setView([39.8282, -98.5795], 5);
    L.control.zoom({position: "bottomright"}).addTo(map);
    // construct the base map.
    L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png').addTo(map);

    var mapboxAccessToken = 'pk.eyJ1IjoibWF0dCIsImEiOiJTUHZkajU0In0.oB-OGTMFtpkga8vC48HjIg';

    var antitoner = L.tileLayer.gl({
        fragmentShader: fragmentShader,
        tileUrls: ['https://{s}.tiles.mapbox.com/v4/mapbox.terrain-rgb/{z}/{x}/{y}.pngraw?access_token=' + mapboxAccessToken]
    }).addTo(map);

</script>
</body>
</html>